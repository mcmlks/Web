<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MCML ホームページ</title>
  <meta name="description" content="MCMLはMinecraft好きが集まる日本のコミュニティ。お知らせ、イベント、サーバー情報、参加方法など。" />
  <meta property="og:title" content="MCML 公式ホームページ" />
  <meta property="og:description" content="Minecraft好きが集まる日本のコミュニティ。最新情報とイベントはこちら。" />
  <meta property="og:type" content="website" />
  <meta name="theme-color" content="#1f2937" />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' fill='%231f2937'/><text x='50' y='58' font-size='48' text-anchor='middle' fill='%23fff'>M</text></svg>">
  <style>
    /* ===== Reset ===== */
    *,*::before,*::after{box-sizing:border-box}
    html,body,h1,h2,h3,h4,p,ul,ol,li,figure,figcaption,blockquote,dl,dd{margin:0;padding:0}
    ul{list-style:none}
    img{max-width:100%;display:block}
    a{color:inherit;text-decoration:none}

    /* ===== Theme ===== */
    :root{
      --bg:#0b1020;
      --panel:#121b36;
      --panel-2:#0e152b;
      --text:#e5e7eb;
      --muted:#9aa4b2;
      --brand:#22d3ee;
      --brand-2:#34d399;
      --danger:#ef4444;
      --shadow:0 10px 30px rgba(0,0,0,.35);
      --radius:18px;
      --gap:16px;
      --max:1100px;
    }
    body{
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans JP", Helvetica, Arial, sans-serif;
      background:linear-gradient(180deg,#0b1020 0%, #0a0f1b 100%);
      color:var(--text); line-height:1.65
    }
    .container{width:min(var(--max), 92vw); margin-inline:auto}

    /* ===== Base.html 用（ヘッダー） ===== */
    header{position:sticky; top:0; z-index:40; backdrop-filter:blur(10px);
           background: color-mix(in oklab, #0b1020 80%, transparent);
           border-bottom:1px solid rgba(255,255,255,.08)}
    .nav{display:flex; align-items:center; gap:14px; padding:12px 24px}
    .brand{display:flex; align-items:center; gap:10px; font-weight:900; letter-spacing:.2px}
    .sp{flex:1}
    .navlinks{display:flex; gap:8px; flex-wrap:wrap}
    .link{display:inline-flex; padding:8px 10px; border-radius:10px}
    .link:hover{background:rgba(255,255,255,.06)}
    .btn{display:inline-flex; align-items:center; gap:10px; padding:12px 16px; border-radius:14px; background:var(--brand); color:#081019; font-weight:700; box-shadow:var(--shadow); border:0; cursor:pointer}
    .btn.secondary{background:transparent; color:var(--text); border:1px solid rgba(255,255,255,.14)}

    /* ===== Hero ===== */
    .hero{position:relative; isolation:isolate; padding:64px 0 24px; overflow:hidden}
    .hero::before{content:""; position:absolute; inset:-20% -5% auto; height:60%; z-index:-1; background:
      conic-gradient(from 45deg at 20% 30%, rgba(34,211,238,.2), transparent 30%),
      radial-gradient(600px 300px at 80% -40%, rgba(52,211,153,.18), transparent 60%),
      radial-gradient(500px 320px at -20% 20%, rgba(34,211,238,.15), transparent 60%);
      filter: blur(12px); opacity:.9}
    .hero-grid{display:grid; grid-template-columns:1.2fr .8fr; gap:28px}
    .hero h1{font-size:clamp(28px, 5vw, 48px); line-height:1.15; letter-spacing:.2px}
    .hero p.lead{margin-top:12px; color:var(--muted)}
    .cta{display:flex; gap:12px; margin-top:18px; flex-wrap:wrap}

    /* ===== Sections / Cards ===== */
    .card{background:linear-gradient(180deg,var(--panel) 0%, var(--panel-2) 100%); border:1px solid rgba(255,255,255,.06); border-radius:var(--radius); box-shadow:var(--shadow)}
    .card .content{padding:18px}
    section{padding:34px 0}
    section h2{font-size:clamp(20px, 3.6vw, 28px); margin-bottom:14px}
    .grid{display:grid; gap:var(--gap)}
    .grid.cols-3{grid-template-columns:repeat(3, 1fr)}
    .grid.cols-2{grid-template-columns:repeat(2, 1fr)}
    @media (max-width: 900px){
      .hero-grid{grid-template-columns:1fr}
      .grid.cols-3{grid-template-columns:1fr 1fr}
    }
    @media (max-width: 640px){
      .grid.cols-3,.grid.cols-2{grid-template-columns:1fr}
    }

    /* ===== Gallery (cards + horizontal scroller) ===== */
    .imgcard{position:relative; overflow:hidden; border-radius:14px; border:1px solid rgba(255,255,255,.08); background:#0e152b; cursor:pointer}
    .imgwrap{aspect-ratio: 16/9; width:100%; position:relative; overflow:hidden}
    .imgwrap img{width:100%; height:100%; object-fit:cover; display:block; transition:transform .3s ease}
    .imgcard:hover img{transform:scale(1.03)}
    .imgcap{padding:10px 12px; color:var(--muted); font-size:14px; border-top:1px solid rgba(255,255,255,.06)}
    .imgph{width:100%; height:100%; display:grid; place-items:center; color:#9aa4b2; font-size:12px; background:linear-gradient(180deg,#101a33,#0e152b)}
    /* 横スクロール・スナップ */
    .hscroll{display:grid; grid-auto-flow:column; grid-auto-columns:minmax(260px, 1fr); gap:var(--gap);
             overflow-x:auto; padding-bottom:6px; scroll-snap-type:x mandatory; -webkit-overflow-scrolling:touch}
    .hscroll::-webkit-scrollbar{height:8px}
    .hscroll > *{scroll-snap-align:start}
    .autoScrollHint{color:var(--muted); font-size:12px; margin-top:8px}

    /* ===== Lightbox (popup) ===== */
    .lightbox{position:fixed; inset:0; background:rgba(5,8,15,.75); display:none; align-items:center; justify-content:center; z-index:1000; backdrop-filter:blur(3px)}
    .lightbox.open{display:flex}
    .lb-inner{position:relative; width:min(96vw, 1100px); max-height:90vh; display:grid; grid-template-rows: auto 1fr auto; gap:8px}
    .lb-media{background:#0b1224; border:1px solid rgba(255,255,255,.12); border-radius:14px; overflow:hidden; display:grid; place-items:center}
    .lb-media img{width:100%; height:100%; object-fit:contain; background:#0b1224}
    .lb-caption{display:flex; justify-content:space-between; gap:12px; align-items:center; color:#c8d0dc; font-size:14px}
    .lb-actions{position:absolute; inset:auto 0 50% 0; transform:translateY(50%); display:flex; justify-content:space-between; pointer-events:none}
    .lb-btn{pointer-events:auto; background:rgba(0,0,0,.45); border:1px solid rgba(255,255,255,.18); color:#fff; width:44px; height:44px; display:grid; place-items:center; border-radius:10px; cursor:pointer}
    .lb-btn:hover{background:rgba(0,0,0,.6)}
    .lb-close{position:absolute; top:-12px; right:-12px; width:40px; height:40px; border-radius:999px; background:rgba(0,0,0,.65); border:1px solid rgba(255,255,255,.18); color:#fff; display:grid; place-items:center; cursor:pointer}
    @media (max-width:640px){
      .lb-inner{width:96vw}
      .lb-actions{inset:auto 6px 50% 6px}
    }

    /* ===== Footer ===== */
    footer{padding:28px 0 48px; color:var(--muted); border-top:1px solid rgba(255,255,255,.08)}
    .footer-grid{display:grid; grid-template-columns:1fr 1fr; gap:18px}
    .tiny{font-size:12px; opacity:.8}

    /* ===== Utility ===== */
    .pill{display:inline-block; padding:6px 10px; border:1px solid rgba(255,255,255,.12); border-radius:999px; font-size:12px; opacity:.9}
    .kbd{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size:12px; background:rgba(255,255,255,.05); padding:2px 6px; border-radius:6px}
    .muted{color:var(--muted)}
  </style>
</head>
<body>
  <!-- 共通ヘッダー（サーバー側インクルード） -->
  <!--#include "/Public/Base.html" -->

  <!-- ===== Hero ===== -->
  <section class="hero">
    <div class="container hero-grid">
      <div>
        <span class="pill">マインクラフトマルチ連盟</span>
        <h1>マイクラ好きがつながる場所<br/>MCML</h1>
        <p class="lead">～初心者から上級さんまで歓迎～</p>
        <div class="cta">
          <a class="btn" href="#discord" aria-label="コミュニティに参加する">参加する
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M5 12h14M13 5l7 7-7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
          </a>
          <a class="btn secondary" href="#minecraft">サーバー一覧</a>
        </div>
      </div>
      <aside class="card">
        <div class="content">
          <h3 style="margin-bottom:8px">最近のハイライト</h3>
          <ul style="display:grid; gap:10px">
            <li>2025年08月02日 夏祭り-文化祭イベント</li>
            <li>2024年12月22日 クリスマスイベント</li>
            <li>2024年11月16日 釣り大会</li>
            <li>2024年10月31日 ハロウィン写真コンテスト</li>
          </ul>
        </div>
      </aside>
    </div>
  </section>

  <!-- ===== Features ===== -->
  <section id="features">
    <div class="container">
      <h2>特長</h2>
      <div class="grid cols-3" style="margin-top:10px">
        <article class="card"><div class="content"><h3>みんなでワイワイ</h3><p class="muted">一人で進めたい方やみんなで楽しくマルチを楽しみたい方が集まっています</p></div></article>
        <article class="card"><div class="content"><h3>優しいメンバー</h3><p class="muted">新規さんや初心者さんはもちろん、みんなが優しく教え合ったり楽しくマルチをしています</p></div></article>
        <article class="card"><div class="content"><h3>イベント</h3><p class="muted">数ヶ月に1度ミニイベントを開催！年に大規模イベント2～5回を開催！（夏祭り、クリスマス、ハロウィン、年末、釣り大会など）</p></div></article>
      </div>
    </div>
  </section>

  <!-- ===== Gallery ===== -->
  <section id="gallery">
    <div class="container">
      <h2>ギャラリー</h2>
      <!-- カード表示（3カラム） -->
      <div id="galleryGrid" class="grid cols-3" style="margin-top:10px"></div>
      <!-- 横スクロール表示（多いときにJSで切替） -->
      <div id="galleryHScroll" class="hscroll" style="margin-top:10px; display:none"></div>
      <p class="autoScrollHint" id="autoScrollHint" style="display:none">写真が多いため自動で横スクロールしています。ホバーで一時停止できます。</p>
      <p class="muted" style="margin-top:8px">※ 下の <code>GALLERY_LINKS</code> に画像URLを追加するとここに表示されます。</p>
    </div>
  </section>

  <!-- ===== Discord (Join) ===== -->
  <section id="discord">
    <div class="container">
      <h2>参加方法</h2>
      <div class="card" style="margin-top:10px"><div class="content">
        <ol style="display:grid; gap:10px; padding-left:18px">
          <li>公式Discordに参加（招待リンクをクリック）</li>
          <li>Minecraft Java版またはBedrock版を用意</li>
          <li>ルールを確認して好きなサーバーにログイン</li>
        </ol>
        <div style="display:flex; gap:12px; margin-top:12px; flex-wrap:wrap">
          <a class="btn" id="openInvite" href="#" rel="noopener">招待リンクを開く</a>
          <a class="btn secondary" id="copyInvite" href="#">招待リンクをコピー</a>
        </div>
        <p class="muted" style="margin-top:8px">不明点はDiscordでお気軽にご質問ください。</p>
        <p class="muted" id="inviteText" style="margin-top:6px; word-break:break-all"><span class="kbd">YOUR_DISCORD_INVITE_URL</span></p>
      </div></div>
    </div>
  </section>

  <!-- ===== Minecraft (Servers) ===== -->
  <section id="minecraft">
    <div class="container">
      <h2>サーバーリスト</h2>
      <div class="grid cols-3" style="margin-top:10px">
        <article class="card"><div class="content"><h3>永久鯖(サバイバルサーバー)</h3><p class="muted">永遠に変わることのないサバイバルサーバー。</p><p>アドレス：<span class="kbd">記載なし</span></p></div></article>
        <article class="card"><div class="content"><h3>シーズンサーバー</h3><p class="muted">大型アップデートなどでワールドが変わるシーズン型サーバー</p><p><span class="kbd"></span></p></div></article>
        <article class="card"><div class="content"><h3>MCMLKC</h3><p class="muted">建築専用クリエイティブサーバー</p><p><span class="kbd"></span></p></div></article>
        <article class="card"><div class="content"><h3>MCMLKCR</h3><p class="muted">レッドストーン専用クリエイティブサーバー</p><p><span class="kbd"></span></p></div></article>
      </div>
    </div>
  </section>

  <!-- ===== FAQ ===== -->
  <section id="faq">
    <div class="container">
      <h2>FAQ</h2>
      <div class="card" style="margin-top:10px"><div class="content">
        <dl>
          <dt><strong>いつ活動していますか？</strong></dt>
          <dd class="muted">24時間いつでも参加可能です！</dd>
          <dt style="margin-top:10px"><strong>サイトの内容は誰が更新？</strong></dt>
          <dd class="muted">コミュニティーの方が編集リクエストし、変更が可能です</dd>
        </dl>
      </div></div>
    </div>
  </section>

  <!-- ===== Lightbox (popup) ===== -->
  <div class="lightbox" id="lightbox" aria-modal="true" role="dialog">
    <div class="lb-inner">
      <div class="lb-media"><img id="lbImg" alt="拡大画像" decoding="async"></div>
      <div class="lb-caption">
        <span id="lbText" class="muted"></span>
        <span id="lbIndex" class="muted"></span>
      </div>
      <button class="lb-close" id="lbClose" aria-label="閉じる">✕</button>
      <div class="lb-actions">
        <button class="lb-btn" id="lbPrev" aria-label="前へ">‹</button>
        <button class="lb-btn" id="lbNext" aria-label="次へ">›</button>
      </div>
    </div>
  </div>

  <!-- ===== Footer ===== -->
  <footer>
    <div class="container footer-grid">
      <div>
        <strong>MCML</strong>
        <p class="tiny">© <span id="year"></span> MCML Community. 非公式のMinecraftコミュニティーサイトです。Minecraft は Mojang Studios の商標です。</p>
      </div>
      <div style="text-align:right">
        <a class="pill" href="#top">トップへ戻る ↑</a>
      </div>
    </div>
  </footer>

  <script>
    /* ================= 設定 ================= */
    const GALLERY_LINKS = [
      "https://pbs.twimg.com/media/GecRY-3akAAAiuJ?format=jpg&name=large",
      // 推奨：自分のリポジトリ/CDN配下の画像
      // "https://raw.githubusercontent.com/<OWNER>/<REPO>/<BRANCH>/Public/images/build1.jpg",
      // "https://example.com/path/screenshot2.png",
    ];
    const DISCORD_INVITE_URL = "YOUR_DISCORD_INVITE_URL";
    /* ======================================= */

    // 年表示
    document.getElementById('year').textContent = new Date().getFullYear();

    // 招待リンク
    document.getElementById('inviteText').innerHTML = `<span class="kbd">${DISCORD_INVITE_URL}</span>`;
    document.getElementById('openInvite').addEventListener('click', (e)=>{
      e.preventDefault();
      window.open(DISCORD_INVITE_URL, "_blank", "noopener,noreferrer");
    });
    document.getElementById('copyInvite').addEventListener('click', (e)=>{
      e.preventDefault();
      navigator.clipboard.writeText(DISCORD_INVITE_URL).then(()=>alert("招待リンクをコピーしました"));
    });

    // ===== ギャラリー表示（カード or 横スクロール） =====
    const grid   = document.getElementById('galleryGrid');
    const strip  = document.getElementById('galleryHScroll');
    const hint   = document.getElementById('autoScrollHint');

    function makeCard(url, idx){
      const card = document.createElement('article');
      card.className = 'imgcard';
      card.setAttribute('data-index', idx);

      const wrap = document.createElement('div');
      wrap.className = 'imgwrap';

      const ph = document.createElement('div');
      ph.className = 'imgph';
      ph.textContent = '読み込み中…';
      wrap.appendChild(ph);

      const img = document.createElement('img');
      img.loading = 'lazy';
      img.decoding = 'async';
      img.alt = 'MCML ギャラリー画像';
      img.src = url;
      img.addEventListener('load', ()=> wrap.replaceChildren(img));
      img.addEventListener('error', ()=> { ph.textContent = '画像を表示できませんでした'; wrap.replaceChildren(ph); });

      card.appendChild(wrap);

      try{
        const u = new URL(url);
        const cap = document.createElement('div');
        cap.className = 'imgcap';
        cap.textContent = u.hostname;
        card.appendChild(cap);
      }catch(_){}

      // クリックでライトボックス
      card.addEventListener('click', ()=> openLightbox(idx));
      return card;
    }

    function renderGallery(){
      if(!Array.isArray(GALLERY_LINKS) || GALLERY_LINKS.length === 0){
        const p = document.createElement('p');
        p.className = 'muted';
        p.textContent = '画像URLを GALLERY_LINKS に追加すると表示されます。';
        grid.appendChild(p);
        return;
      }

      // まず通常グリッドに配置
      GALLERY_LINKS.forEach((url, i)=> grid.appendChild(makeCard(url, i)));

      // 幅を見て「はみ出す」= 横スクロール版に切替
      requestAnimationFrame(()=>{
        const totalCols = getComputedStyle(grid).gridTemplateColumns.split(' ').length;
        const minCardWidth = grid.querySelector('.imgcard')?.getBoundingClientRect().width || 280;
        const neededWidth = (minCardWidth + 16/*gap概算*/) * GALLERY_LINKS.length;
        const visibleWidth = grid.getBoundingClientRect().width;

        const shouldScroll = neededWidth > visibleWidth * 1.2; // ちょい余裕を見て判定
        if(shouldScroll){
          // strip に入れ直し
          strip.innerHTML = '';
          GALLERY_LINKS.forEach((url, i)=> strip.appendChild(makeCard(url, i)));
          grid.style.display = 'none';
          strip.style.display = 'grid';
          hint.style.display = 'block';
          startAutoScroll();
        }
      });
    }

    // ===== ライトボックス（ポップアップ） =====
    const lb      = document.getElementById('lightbox');
    const lbImg   = document.getElementById('lbImg');
    const lbText  = document.getElementById('lbText');
    const lbIndex = document.getElementById('lbIndex');
    const btnPrev = document.getElementById('lbPrev');
    const btnNext = document.getElementById('lbNext');
    const btnClose= document.getElementById('lbClose');
    let cur = 0;

    function showAt(i){
      cur = (i + GALLERY_LINKS.length) % GALLERY_LINKS.length;
      const url = GALLERY_LINKS[cur];
      lbImg.src = ''; // reset first to avoid flash
      lbImg.src = url;
      try{ lbText.textContent = new URL(url).hostname; }catch{ lbText.textContent = ''; }
      lbIndex.textContent = `${cur+1} / ${GALLERY_LINKS.length}`;
      // 近傍プリロード
      const preloadNext = new Image(); preloadNext.src = GALLERY_LINKS[(cur+1)%GALLERY_LINKS.length];
      const preloadPrev = new Image(); preloadPrev.src = GALLERY_LINKS[(cur-1+GALLERY_LINKS.length)%GALLERY_LINKS.length];
    }
    function openLightbox(i){
      lb.classList.add('open');
      document.body.style.overflow = 'hidden';
      pauseAutoScroll();
      showAt(i);
    }
    function closeLightbox(){
      lb.classList.remove('open');
      document.body.style.overflow = '';
      resumeAutoScroll();
    }
    btnPrev.addEventListener('click', e=>{ e.stopPropagation(); showAt(cur-1); });
    btnNext.addEventListener('click', e=>{ e.stopPropagation(); showAt(cur+1); });
    btnClose.addEventListener('click', e=>{ e.stopPropagation(); closeLightbox(); });
    lb.addEventListener('click', e=>{ if(e.target === lb) closeLightbox(); });
    document.addEventListener('keydown', e=>{
      if(!lb.classList.contains('open')) return;
      if(e.key === 'Escape') closeLightbox();
      if(e.key === 'ArrowLeft') showAt(cur-1);
      if(e.key === 'ArrowRight') showAt(cur+1);
    });

    // スワイプ（モバイル）
    (function addSwipe(el){
      let sx=0, dx=0;
      el.addEventListener('touchstart', e=>{ if(!lb.classList.contains('open')) return; sx = e.touches[0].clientX; }, {passive:true});
      el.addEventListener('touchmove',  e=>{ if(!lb.classList.contains('open')) return; dx = e.touches[0].clientX - sx; }, {passive:true});
      el.addEventListener('touchend',   ()=>{ if(!lb.classList.contains('open')) return;
        if(Math.abs(dx) > 50){ dx<0 ? showAt(cur+1) : showAt(cur-1); }
        sx=0; dx=0;
      });
    })(document.getElementById('lightbox'));

    // ===== 自動横スクロール（はみ出す場合のみ起動） =====
    let autoTimer=null, paused=false;
    function startAutoScroll(){
      if(autoTimer) return;
      const el = strip;
      const step = 1.2; // px per frame-ish
      function tick(){
        if(paused) { autoTimer = requestAnimationFrame(tick); return; }
        const max = el.scrollWidth - el.clientWidth;
        if(max <= 0){ cancelAnimationFrame(autoTimer); autoTimer=null; return; }
        el.scrollLeft += step;
        // 端まで行ったら戻す
        if(el.scrollLeft >= max - 2){ el.scrollLeft = 0; }
        autoTimer = requestAnimationFrame(tick);
      }
      autoTimer = requestAnimationFrame(tick);
      el.addEventListener('mouseenter', ()=> paused=true);
      el.addEventListener('mouseleave', ()=> paused=false);
      el.addEventListener('touchstart', ()=> paused=true, {passive:true});
      el.addEventListener('touchend',   ()=> paused=false);
    }
    function pauseAutoScroll(){ paused = true; }
    function resumeAutoScroll(){ paused = false; }

    // ===== 初期化 =====
    renderGallery();

    // スムーズスクロール（サイト内アンカー）
    document.addEventListener('click', (e) => {
      const a = e.target.closest('a[href^="#"]');
      if (!a) return;
      const id = a.getAttribute('href').slice(1);
      const el = document.getElementById(id);
      if (el) {
        e.preventDefault();
        el.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }
    });
  </script>
</body>
</html>
